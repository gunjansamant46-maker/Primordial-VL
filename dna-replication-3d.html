<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Interactive DNA Replication</title>
<style>
body { margin:0; overflow:hidden; background:#F2FBF8; }
#ui {
    position:absolute;
    top:20px;
    left:20px;
}
button {
    padding:10px 20px;
    border:none;
    border-radius:10px;
    background:#A8D5C2;
    cursor:pointer;
    font-weight:bold;
}
</style>
</head>
<body>

<div id="ui">
    <button onclick="toggleAnimation()">Pause</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>

<script>

let scene = new THREE.Scene();
scene.background = new THREE.Color(0xF2FBF8);

let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,5,15);

let renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

let controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// Lighting
let light = new THREE.PointLight(0xffffff,1);
light.position.set(10,10,10);
scene.add(light);

// DNA strands
let strandGroup = new THREE.Group();
let blue1 = new THREE.MeshStandardMaterial({color:0x4F83CC});
let blue2 = new THREE.MeshStandardMaterial({color:0x1F3A93});

for(let i=0;i<40;i++){
    let geo = new THREE.SphereGeometry(0.25,16,16);

    let s1 = new THREE.Mesh(geo,blue1);
    let s2 = new THREE.Mesh(geo,blue2);

    let offset = Math.min(i*0.05,2); // fork opening effect

    s1.position.set(Math.sin(i*0.4)*(2+offset), i*0.3-6,0);
    s2.position.set(Math.sin(i*0.4)*-(2+offset), i*0.3-6,0);

    strandGroup.add(s1);
    strandGroup.add(s2);
}

scene.add(strandGroup);

// Primer
let primerMat = new THREE.MeshStandardMaterial({color:0x2ECC71});
let primer = new THREE.Mesh(new THREE.BoxGeometry(1.5,0.3,0.3),primerMat);
primer.position.set(2,-3,0);
scene.add(primer);

// Leading strand
let leadMat = new THREE.MeshStandardMaterial({color:0xFFA500});
let leading = new THREE.Mesh(new THREE.CylinderGeometry(0.2,0.2,5,16),leadMat);
leading.rotation.z = Math.PI/2;
leading.position.set(4,0,0);
scene.add(leading);

// Lagging fragments
let lagMat = new THREE.MeshStandardMaterial({color:0xFFD700});
let lagging = new THREE.Group();
for(let i=0;i<3;i++){
    let frag = new THREE.Mesh(new THREE.CylinderGeometry(0.2,0.2,2,16),lagMat);
    frag.rotation.z = Math.PI/2;
    frag.position.set(-4, i*1.5-1.5,0);
    lagging.add(frag);
}
scene.add(lagging);

// Origin marker
let originMat = new THREE.MeshStandardMaterial({color:0xFF4C4C});
let origin = new THREE.Mesh(new THREE.SphereGeometry(0.4,16,16),originMat);
origin.position.set(0,-6,0);
scene.add(origin);

let animateReplication = true;

function toggleAnimation(){
    animateReplication = !animateReplication;
}

function animate(){
    requestAnimationFrame(animate);

    if(animateReplication){
        strandGroup.rotation.y += 0.01;
        leading.scale.y = 1 + Math.sin(Date.now()*0.002)*0.1;
    }

    controls.update();
    renderer.render(scene,camera);
}

animate();

window.addEventListener('resize',()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
});

</script>

</body>
</html>
